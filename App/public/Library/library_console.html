<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Library Console</title>
    <link rel="stylesheet" href="/css/Inventory_Css/InventoryAll.css">
    <link rel="stylesheet" href="/css/Inventory_Css/Billing.css">
    <link rel="stylesheet" href="/css/NavButtons.css">
    <link rel="stylesheet" href="/css/Library_Css/Library_Console.css">
</head>

<body>
    <div id="loadingOverlayinventory" class="loading-overlay-inventory">
        <div class="loader2"></div>
    </div>

    <nav class="navbar">
        <div class="logo_item">
            <!-- <i class="bx bx-menu" id="sidebarOpen"></i> -->
            <img id="logo" src="" alt="Logo">
            <!-- <div class="user_name" id="user_name"></div> -->
        </div>

        <div class="navbar_center">
            <button onclick="window.location.href='/dashboard'"> <i class='bx' id="backButton"> <img
                        src="/images/back.png" alt="Previous Icon"></i></button>
            <button onclick="window.location.href='/dashboard'"><i class='bx' id="homeButton"> <img
                        src="/images/homeicon.png" alt="Dashboard Icon"></i></button>
            <button id="logoutButton"> <i class='bx' id="signoutButton"> <img src="/images/logout.png"
                        alt="Signout Icon"></i></button>
        </div>

        <div class="navbar_content">
            <!-- <i class="bi bi-grid"></i>
      <i class='bx bx-bell'></i> -->
        </div>
    </nav>span>
    </button>

    <div class="adm-head">
        <div class="button-container">
            <h2>Library Console</h2>
        </div>
    </div>

    <div class="cards-container">
        <div class="card">
            <a>
                <button id="bookVaultButton">
                    <div class="dotlottie-container">
                        <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs"
                            type="module"></script>

                        <dotlottie-player src="https://lottie.host/447ebf8f-0a36-4f35-8c08-7459ef896dca/Yw65sJQaYM.json"
                            background="transparent" speed="1" style="width: 300px; height: 300px;" loop
                            autoplay></dotlottie-player>
                    </div>
                    <h3>Book Vault</h3>
                </button>
            </a>
        </div>

        <div class="card">
            <a>
                <button id="manageMemberButton">
                    <div class="dotlottie-container">
                        <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs"
                            type="module"></script>

                        <dotlottie-player src="https://lottie.host/704c844e-b731-46e2-8c31-b24d8d427405/P6qMo1nlz5.json"
                            background="transparent" speed="1" style="width: 280px; height: 280px;" loop
                            autoplay></dotlottie-player>
                    </div>
                    <h3>Manage Member</h3>
                </button>
            </a>
        </div>

        <div class="card">
            <a>
                <button id="transactionTrackerButton">
                    <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs"
                        type="module"></script>

                    <dotlottie-player src="https://lottie.host/48862de0-8b44-4c46-8433-9e10ee667214/NVSBA2kUbM.json"
                        background="transparent" speed="0.5" style="width: 300px; height: 300px;" loop
                        autoplay></dotlottie-player>
                    <h3>Transaction Tracker</h3>
                </button>
            </a>
        </div>

        <div class="card">
            <a>
                <button id="openPenaltyProcessorOverlay">
                    <div class="dotlottie-container">
                        <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs"
                            type="module"></script>

                        <dotlottie-player src="https://lottie.host/8ad1333b-3920-4d20-97d7-28f35867934f/gBcLgACTfn.json"
                            background="transparent" speed="1" style="width: 300px; height: 300px;" loop
                            autoplay></dotlottie-player>

                    </div>
                    <h3>Penalty Processor</h3>
                </button>
            </a>
        </div>

        <div class="card">
            <a href="">
                <button>
                    <div class="dotlottie-container">
                        <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs"
                            type="module"></script>

                        <dotlottie-player src="https://lottie.host/ef533a2f-dd72-4975-9c7f-43415af3cd2d/8xsYamti04.json"
                            background="transparent" speed="1" style="width: 250px; height: 250px;" loop
                            autoplay></dotlottie-player>

                    </div>
                    <h3>Report</h3>
                </button>
            </a>
        </div>

    </div>

    <!-- Overlay for selecting Add or Search Book -->
    <div id="bookVaultOverlay" class="overlay">
        <div class="overlay-content" style="max-width: 700px;">
            <h2>Book Vault</h2>
            <button id="closeBookVaultOverlay" class="close-button">&times;</button>
            <div class="button-container">
                <div class="bookvaltcard">
                    <span id="addBookButton">
                        <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs"
                            type="module"></script>

                        <dotlottie-player src="https://lottie.host/1d6e040f-8bac-4d2f-a852-0ad55d1d3504/RW4RyJSpZz.json"
                            background="transparent" speed="1" style="width: 170px; height: 170px;" loop
                            autoplay></dotlottie-player>Add Book
                    </span>
                </div>
                <div class="bookvaltcard">
                    <span id="searchBookButton">
                        <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs"
                            type="module"></script>

                        <dotlottie-player src="https://lottie.host/9001527e-468e-4f23-925a-8baf873ac559/oDfgDP4MIb.json"
                            background="transparent" speed="1" style="width: 170px; height: 170px;" loop
                            autoplay></dotlottie-player>Search Book
                    </span>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay for Add Book -->
    <div id="addBookOverlay" class="overlay">
        <div class="overlay-content">
            <button id="closeAddBookOverlay" class="close-button">&times;</button>

            <div class="overlay-inner">
                <div class="left-side">
                    <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs"
                        type="module"></script>

                    <dotlottie-player src="https://lottie.host/f1ef15f0-e5ab-415a-8f01-9cfdf4c36034/TwCFf8dsdN.json"
                        background="transparent" speed="1" style="width: 300px; height: 300px;" loop
                        autoplay></dotlottie-player>
                </div>
                <div class="right-side">
                    <h2>Add Book</h2>
                    <form id="addBookForm">
                        <div class="form-row">
                            <div class="form-group">
                                <input type="text" class="form-control" id="bookID" required placeholder=" ">
                                <span class="form-control-placeholder">Book ID</span>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="bookName" required placeholder=" ">
                                <span class="form-control-placeholder">Book Name</span>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <input type="text" class="form-control" id="authorName" required placeholder=" ">
                                <span class="form-control-placeholder">Author Name</span>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="bookPublication" required placeholder=" ">
                                <span class="form-control-placeholder">Book Publication</span>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <input type="number" class="form-control" id="bookPrice" required placeholder=" ">
                                <span class="form-control-placeholder">Book Price</span>
                            </div>
                            <div class="form-group">
                                <input type="number" class="form-control" id="orderedQuantity" required placeholder=" ">
                                <span class="form-control-placeholder">Ordered Quantity</span>
                            </div>
                        </div>

                        <div class="form-group">
                            <textarea class="form-control" id="description" required placeholder=" "></textarea>
                            <span class="form-control-placeholder">Description</span>
                        </div>

                        <button id="btn" type="submit" class="animatedBtn">
                            <p id="btnText">Submit</p>
                            <div class="check-box">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50">
                                    <path fill="transparent" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                                </svg>
                            </div>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>



    <!-- Overlay for Search Book -->
    <div id="searchBookOverlay" class="overlay">
        <div class="overlay-content-search">
            <button id="closeSearchBookOverlay" class="close-button">&times;</button>
            <h2>Search Book</h2>
            <div class="search-container">
                <div class="form-Searchgroup">
                    <div class="form-Searchgroup">
                        <img class="vendorIcon" src="/images/search.gif" alt="Search Icon" style="right: 25px;">
                        <input type="text" class="form-control" id="searchBar" name="bookSearch" placeholder=" "
                            oninput="searchLibraryBookDetails()" style="width: 400px; height: 1.7rem !important;">
                        <span class="form-control-placeholder" style="left: 3.75rem;">Search Book...</span>
                    </div>
                    <button id="refreshButton" onclick="refreshBooksData()" style="margin-top: 10px;">
                        <img src="/images/refresh.png" alt="Refresh Icon"> Refresh
                    </button>
                    <button id="export_registered_students" onclick="exportBooksTable()" style="margin-top: 10px;">
                        <img src="/images/export.png" alt="Export Icon"> Export
                    </button>
                </div>
            </div>
            <div class="table-container">
                <table id="booksTable" class="styled-table">
                    <thead>
                        <tr>
                            <th>Book ID</th>
                            <th>Book Name</th>
                            <th>Author Name</th>
                            <th>Book Publication</th>
                            <th>Book Price</th>
                            <th>Ordered Quantity</th>
                            <th>Description</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="booksTablebody">
                        <!-- Table rows will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>


    <!-- Overlay for selecting Add or Search Member -->
    <div id="manageMemberOverlay" class="overlay">
        <div class="overlay-content" style="max-width: 700px;">
            <h2>Manage Member</h2>
            <button id="closeManageMemberOverlay" class="close-button">&times;</button>
            <button id="addMemberButton">Add Member</button>
            <button id="searchMemberButton">Search Member</button>
        </div>
    </div>

    <!-- Overlay for Add Member -->
    <div id="addMemberOverlay" class="overlay">
        <div class="overlay-content">
            <button id="closeAddMemberOverlay" class="close-button">&times;</button>
            <h2>Add Member</h2>
            <form id="addMemberForm">
                <label for="memberName">Member Name:</label>
                <input type="text" id="memberName" name="memberName" required><br>
                <label for="memberName">Member ID:</label>
                <input type="text" id="memberID" name="memberID" required><br>
                <label for="classFilter">Class:</label>
                <select id="classFilter" name="classFilter" class="custom-select" required>
                    <option value="" disabled selected style="display:none;">Select Class</option>
                    <option value="Nursery">Nursery</option>
                    <option value="KG1">KG-1</option>
                    <option value="KG2">KG-2</option>
                    <option value="1st">1st</option>
                    <option value="2nd">2nd</option>
                    <option value="3rd">3rd</option>
                    <option value="4th">4th</option>
                    <option value="5th">5th</option>
                    <option value="6th">6th</option>
                    <option value="7th">7th</option>
                    <option value="8th">8th</option>
                    <option value="9th">9th</option>
                    <option value="10th">10th</option>
                </select><br>
                <label for="contact">Contact:</label>
                <input type="text" id="contact" name="contact" required><br>
                <button type="submit">Submit</button>
            </form>
        </div>
    </div>

    <!-- Overlay for Search Member -->
    <div id="searchMemberOverlay" class="overlay">
        <div class="overlay-content">
            <button id="closeSearchMemberOverlay" class="close-button">&times;</button>
            <h2>Search Member</h2>
            <input type="text" id="searchMemberInput" placeholder="Search by student name"
                oninput="searchMemberDetails()">
            <button id="refreshMembersData" onclick="refreshMembersData()">Refresh</button>
            <button onclick="exportMembersTable()" class="export-button">Export Members Table</button>
            <table id="membersTable">
                <thead>
                    <tr>
                        <!-- <th>Sr No</th> -->
                        <th>Member ID</th>
                        <th>Student Name</th>
                        <th>Class</th>
                        <th>Contact</th>
                        <th>Books Issued</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="membersTablebody">
                    <!-- Table rows will be populated here -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Transaction Tracker Overlay -->
    <div id="transactionTrackerOverlay" class="overlay">
        <div class="overlay-content">
            <button id="closeTransactionTrackerOverlay" class="close-button">×</button>
            <h2>Transaction Tracker</h2>
            <div class="button-container">
                <button id="issueBookButton">Issue Book</button>
                <button id="returnBookButton">Return Book</button>
                <button id="searchTransactionButton">Search Transaction</button>
            </div>
        </div>
    </div>

    <!-- Issue Book Overlay -->
    <div id="issueBookOverlay" class="overlay">
        <div class="overlay-content" style="max-width: 700px;">
            <button id="closeIssueBookOverlay" class="close-button">×</button>
            <h2>Issue Book</h2>
            <div class="overlay-inner">
                <div class="left-side">
                    <form id="issueBookForm">
                        <div class="form-group">
                            <input type="text" class="form-control" id="studentEnrollmentNo" required placeholder=" ">
                            <span class="form-control-placeholder">Member ID</span>
                        </div>
        
                        <div class="form-group">
                            <input type="text" class="form-control" id="bookEnrollmentNo" required placeholder=" ">
                            <span class="form-control-placeholder">Book ID</span>
                        </div>

                        <button type="submit" class="submit-button">Get Details</button>
                    </form>
                </div>
                <div class="right-side">
                    <form id="additionalInfoForm">
                        <div class="form-row">
                            <div class="form-group">
                                <input type="text" class="form-control" id="studentName" required placeholder=" "
                                    readonly>
                                <span class="form-control-placeholder">Student Name</span>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="class" required placeholder=" " readonly>
                                <span class="form-control-placeholder">Class</span>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <input type="text" class="form-control" id="studentcontact" required placeholder=" " readonly>
                                <span class="form-control-placeholder">Contact</span>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="issuebookName" required placeholder=" " readonly>
                                <span class="form-control-placeholder">Book Name</span>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <input type="text" class="form-control" id="bookauthorName" required placeholder=" " readonly>
                                <span class="form-control-placeholder">Author Name</span>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" id="bookPublication" required placeholder=" "
                                    readonly>
                                <span class="form-control-placeholder">Book Publication</span>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <input type="date" class="form-control" id="issueDate" required placeholder=" ">
                                <span class="form-control-placeholder">Issue Date</span>
                            </div>
                            <div class="form-group">
                                <input type="date" class="form-control" id="returnDate" required placeholder=" ">
                                <span class="form-control-placeholder">Return Date</span>
                            </div>
                        </div>
                        <button type="submit" class="submit-button">Issue Book</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Return Book Overlay -->
    <div id="returnBookOverlay" class="overlay">
        <div class="overlay-content" style="max-width: 700px;">
            <button id="closeReturnBookOverlay" class="close-button">×</button>
            <h2>Return Book</h2>
            <div class="overlay-inner">
                <div class="left-side">
                    <form id="returnBookForm">
                        <div class="form-group">
                            <label>
                                <input type="radio" name="inputType" id="studentRadio" value="student" required>Member
                                ID
                            </label>
                            <label>
                                <input type="radio" name="inputType" id="bookRadio" value="book" required> Book ID
                            </label>
                        </div>
                        <div class="form-group">
                            <input type="text" class="form-control" id="studentOrBookNo" required placeholder=" ">
                            <span class="form-control-placeholder" id="formControlPlaceholder">Enter Member or Book
                                ID</span>
                        </div>
                        <button type="submit" class="submit-button">Get Details</button>
                        <div id="detailsContainer"></div> <!-- New container for details -->
                    </form>
                </div>
                <div class="right-side">
                    <table class="details-table">
                        <thead>
                            <tr id="tableHeaders">
                                <!-- Headers will be dynamically populated here -->
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Rows will be dynamically populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <!-- Search Transaction Overlay -->
    <div id="searchTransactionOverlay" class="overlay">
        <div class="overlay-content">
            <button id="closeSearchTransactionOverlay" class="close-button">×</button>
            <h2>Search Transactions</h2>
            <div class="overlay-inner">
                <div class="left-side">
                    <h3>Issue Details</h3>
                    <table class="details-table">
                        <thead>
                            <tr id="issueTableHeaders">
                                <th>Transaction ID</th>
                                <th>Member ID</th>
                                <th>Book ID</th>
                                <th>Transaction Date</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="issueTableBody">
                            <!-- Issue rows will be dynamically populated here -->
                        </tbody>
                    </table>
                </div>
                <div class="right-side">
                    <h3>Return Details</h3>
                    <table class="details-table">
                        <thead>
                            <tr id="returnTableHeaders">
                                <th>Transaction ID</th>
                                <th>Member ID</th>
                                <th>Book ID</th>
                                <th>Transaction Date</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="returnTableBody">
                            <!-- Return rows will be dynamically populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Penalty Processor Overlay -->
    <div id="penaltyProcessorOverlay" class="overlay">
        <div class="overlay-content">
            <button id="closePenaltyProcessorOverlay" class="close-button">×</button>
            <h2>Penalty Processor</h2>
            <div class="overlay-inner">
                <div class="penalty-details">
                    <h3>Penalties</h3>
                    <div class="search-bar">
                        <input type="text" id="penaltySearchInput" class="search-input"
                            placeholder="Enter Member ID...">
                        <button id="penaltySearchButton" class="search-button">Search</button>
                    </div>
                    <table class="details-table">
                        <thead>
                            <tr id="penaltyTableHeaders">
                                <th>Member Details</th>
                                <th>Contact</th>
                                <th>Book Details</th>
                                <th>Return/Due Date</th>
                                <th>Penalty Amount</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="penaltyTableBody">
                            <!-- Penalty rows will be dynamically populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <script src="/js/Inventory_js/All.js"></script>
    <script src="/js/Library_js/Library_Console.js"></script>
    <script src="/js/Library_js/Library_books.js"></script>
    <script src="/js/Library_js/Library_members.js"></script>
    <script src="/js/Library_js/Library_issueBook.js"></script>
    <script src="/js/Library_js/Library_returnBook.js"></script>
    <script src="/js/Library_js/Library_searchTransaction.js"></script>
    <script src="/js/Library_js/Library_penaltyProcessor.js"></script>


    <script type="text/javascript">
        const btn = document.querySelector("#btn");
        const btnText = document.querySelector("#btnText");

        btn.onclick = () => {
            btnText.innerHTML = "Saved";
            btn.classList.add("active");
        };
    </script>

</body>

</html>