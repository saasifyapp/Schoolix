<!DOCTYPE html>
<!-- Coding by CodingNepal || www.codingnepalweb.com -->
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Boxicons CSS -->
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

  <link rel="stylesheet" href="/css/Main_Dashboard/main_dashboard.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <title>Dashboard</title>


  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.9/xlsx.full.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

  <!-- SweetAlert2 CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
  <!-- SweetAlert2 JS -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body>

  <div id="toast-container" class="toast-container">
    <div id="toast" class="toast"></div>
  </div>

  <div id="passwordPromptOverlay" class="password-prompt-overlay">
    <div class="password-prompt">
      <h3>System Administrator Login</h3>
      <p>This action requires administrator privileges.</p>
      <div class="password-input-container">
        <input type="password" id="passwordPromptInput" class="form-control form-controlSearch"
          placeholder="Password...">
      </div>
      <div class="password-prompt-buttons">
        <button id="passwordPromptOk" type="submit" class="form-control">OK</button>
        <button id="passwordPromptCancel" class="form-control">Cancel</button>
      </div>
    </div>
  </div>

  <!-- navbar -->
  <nav class="navbar">
    <div class="logo_item">
      <i class="bx bx-menu" id="sidebarOpen"></i>
      <img id="logo" src="" alt="Logo">
      <!-- <img src="images/logo.png" alt=""></i> -->
      <div class="user_name" id="user_name"></div>
    </div>

    <!-- <div class="search_bar">
            <input type="text" placeholder="Search" />
        </div> -->

    <div class="navbar_content">
      <i class="bi bi-grid"></i>
      <!-- <i class='bx bx-sun' id="darkLight"></i> -->
      <i class='bx bx-bell'></i>
      <div class="location_dropdown">
        <button class="location_dropbtn"><i class='bx bx-map'></i></button>
        <div class="location_dropdown-content">
          <a href="#" id="auto_detectLocation">Auto Detect Location</a> <!-- Add ID here -->
          <a href="#" id="manually_addLocation">Manually Add Location</a> <!-- Add ID here -->
        </div>
      </div>
    </div>
  </nav>

  <!-- sidebar -->
  <nav class="sidebar">
    <div class="menu_content">
      <ul class="menu_items">

        <div class="menu_title menu_dahsboard_1"></div>
        <!-- duplicate or remove this li tag if you want to add or remove navlink with submenu -->
        <!-- start -->

        <li class="item">
          <div href="" class="nav_link submenu_item">
            <span class="navlink_icon">
              <img src="/images/students.png" alt="Custom Icon" class="custom_icon">
            </span>
            <span class="navlink">Students</span>
            <i class="bx bx-chevron-right arrow-left"></i>
          </div>

          <ul class="menu_items submenu">
            <a href="/Student_Enrollment_Form/student_enrollment_form?mode=enroll" class="nav_link sublink">
              <span class="navlink_icon">
                <img src="/images/enroll.png" alt="Billing Icon" class="custom_icon">
              </span>
              Enroll
            </a>
            <a href="/student_Enrollment_Form/manage_student" class="nav_link sublink">
              <span class="navlink_icon">
                <img src="/images/manage_student.png" alt="Store Icon" class="custom_icon">
              </span>
              Manage
            </a>
          </ul>
        </li>


        <li class="item">
          <a href="" class="nav_link">
            <span class="navlink_icon">
              <img src="/images/teacher.png" alt="Custom Icon" class="custom_icon">
            </span>
            <span class="navlink" style="margin-top: -8px">Teachers</span>
          </a>
        </li>

        <li class="item">
          <div href="" class="nav_link submenu_item">
            <span class="navlink_icon">
              <img src="/images/staff.png" alt="Custom Icon" class="custom_icon">
            </span>
            <span class="navlink">Admin Staff</span>
            <i class="bx bx-chevron-right arrow-left"></i>
          </div>

          <ul class="menu_items submenu">
            <a href="" class="nav_link sublink">
              <span class="navlink_icon">
                <img src="/images/admins.png" alt="Billing Icon" class="custom_icon">
              </span>
              Office Admins
            </a>
            <a href="" class="nav_link sublink">
              <span class="navlink_icon">
                <img src="/images/worker.png" alt="Store Icon" class="custom_icon">
              </span>
              Support Staff
            </a>
          </ul>
        </li>

        <div class="menu_title menu_dahsboard_2"></div>
        <!-- duplicate or remove this li tag if you want to add or remove navlink with submenu -->
        <!-- start -->

        <li class="item">
          <div href="" class="nav_link submenu_item">
            <span class="navlink_icon">
              <img src="/images/fees.png" alt="Custom Icon" class="custom_icon">
            </span>
            <span class="navlink">Fees</span>
            <i class="bx bx-chevron-right arrow-left"></i>
          </div>

          <ul class="menu_items submenu">
            <a href="/FeeStructure/feeStructure" class="nav_link sublink">
              <span class="navlink_icon">
                <img src="/images/fee_structure.png" alt="Billing Icon" class="custom_icon">
              </span>
              Fee Structure
            </a>
            <a href="" class="nav_link sublink">
              <span class="navlink_icon">
                <img src="/images/payments.png" alt="Store Icon" class="custom_icon">
              </span>
              Payments
            </a>
          </ul>
        </li>


        <li class="item">
          <a href="" class="nav_link">
            <span class="navlink_icon">
              <img src="/images/exams.png" alt="Custom Icon" class="custom_icon">
            </span>
            <span class="navlink" style="margin-top: -8px">Exam</span>
          </a>
        </li>

        <li class="item">
          <a class="nav_link" onclick="showOverlay(event)" style="cursor: pointer;">
            <span class="navlink_icon">
              <img src="/images/events.png" alt="Custom Icon" class="custom_icon">
            </span>
            <span class="navlink" style="margin-top: -8px">Calendar</span>
          </a>
        </li>

        <!--<i class="bx bx-chevron-right arrow-left"></i>-->


        <!---------------------------- TO ADD DROPDOWN IN REGISTER, UNCOMMENT BELOW

            <ul class="menu_items submenu">
              <a href="#" class="nav_link sublink">Nav Sub Link</a>
              <a href="#" class="nav_link sublink">Nav Sub Link</a>
              <a href="#" class="nav_link sublink">Nav Sub Link</a>
              <a href="#" class="nav_link sublink">Nav Sub Link</a>
            </ul>
          </li>
           -->

        <!-- duplicate this li tag if you want to add or remove  navlink with submenu -->


        <!-- ------------------------TO ADD A NEW ITEM BELOW REGISTER WITH DROPDOWN, UNCOMMENT BELOW ---------
          <li class="item">
            <div href="#" class="nav_link submenu_item">
              <span class="navlink_icon">
                <i class="bx bx-grid-alt"></i>
              </span>
              <span class="navlink">Overview</span>
              <i class="bx bx-chevron-right arrow-left"></i>
            </div>

            <ul class="menu_items submenu">
              <a href="#" class="nav_link sublink">Nav Sub Link</a>
              <a href="#" class="nav_link sublink">Nav Sub Link</a>
              <a href="#" class="nav_link sublink">Nav Sub Link</a>
              <a href="#" class="nav_link sublink">Nav Sub Link</a>
            </ul>
          </li>
          ------------------>

      </ul>

      <ul class="menu_items">
        <div class="menu_title menu_dahsboard_3"></div>
        <!-- duplicate these li tag if you want to add or remove navlink only -->
        <!-- Start -->
        <li class="item">
          <div href="" class="nav_link submenu_item">
            <span class="navlink_icon">
              <img src="/images/inventory.png" alt="Custom Icon" class="custom_icon">
            </span>
            <span class="navlink">Inventory</span>
            <i class="bx bx-chevron-right arrow-left"></i>
          </div>

          <ul class="menu_items submenu">
            <a href="/inventory/purchase" id="purchaseLink" class="nav_link sublink">
              <span class="navlink_icon">
                <img src="/images/purchase.png" alt="Billing Icon" class="custom_icon">
              </span>
              Purchase
            </a>
            <a href="/inventory/billing" class="nav_link sublink">
              <span class="navlink_icon">
                <img src="/images/invoice.png" alt="Store Icon" class="custom_icon">
              </span>
              Billing
            </a>
            <!--<a href="/inventory/reports" class="nav_link sublink">
                        <span class="navlink_icon">
                            <img src="/images/reports_icon.png" alt="Reports Icon" class="custom_icon">
                        </span>
                        Reports
                    </a>-->
          </ul>
        </li>
        <!-- End -->

        <li class="item">
          <a href="/Library/library_console" class="nav_link">
            <span class="navlink_icon">
              <img src="/images/library.png" alt="Custom Icon" class="custom_icon">
            </span>
            <span class="navlink" style="margin-top: -8px">Library</span>
          </a>
        </li>
        <li class="item">
          <a href="/Transport/transport_console" class="nav_link">
            <span class="navlink_icon">
              <img src="/images/school_bus.png" alt="Custom Icon" class="custom_icon">
            </span>
            <span class="navlink" style="margin-top: -8px">Transport</span>
          </a>
        </li>

        <li class="item">
          <a href="/Attendance/attendance_console" class="nav_link">
            <span class="navlink_icon">
              <img src="/images/attendance (1).png" alt="Custom Icon" class="custom_icon">
            </span>
            <span class="navlink" style="margin-top: -8px">Attendance</span>
          </a>
        </li>



        <div class="menu_title menu_dahsboard_4"></div>
        <!-- duplicate or remove this li tag if you want to add or remove navlink with submenu -->
        <!-- start -->
        <li class="item">
          <a href="/pre_adm_dashboard" class="nav_link">
            <span class="navlink_icon">
              <img src="/images/register.png" alt="Custom Icon" class="custom_icon">
            </span>
            <span class="navlink" style="margin-top: -8px">Pre Admission</span>
          </a>
        </li>

        <!--
          <li class="item">
            <a href="#" class="nav_link">
              <span class="navlink_icon">
                <i class="bx bx-cloud-upload"></i>
              </span>
              <span class="navlink">Upload new</span>
            </a>
          </li> 
        </ul>
        -->

        <!--
        <ul class="menu_items">
          <div class="menu_title menu_setting"></div>
          <li class="item">
            <a href="#" class="nav_link">
              <span class="navlink_icon">
                <i class="bx bx-flag"></i>
              </span>
              <span class="navlink">Notice board</span>
            </a>
          </li>
          <li class="item">
            <a href="#" class="nav_link">
              <span class="navlink_icon">
                <i class="bx bx-medal"></i>
              </span>
              <span class="navlink">Award</span>
            </a>
          </li>
          <li class="item">
            <a href="#" class="nav_link">
              <span class="navlink_icon">
                <i class="bx bx-cog"></i>
              </span>
              <span class="navlink">Setting</span>
            </a>
          </li>
          <li class="item">
            <a href="#" class="nav_link">
              <span class="navlink_icon">
                <i class="bx bx-layer"></i>
              </span>
              <span class="navlink">Features</span>
            </a>
          </li>
        </ul>

        -->
    </div>



    <!-- Sidebar Open / Close -->
    <div class="bottom_content" id="logoutButton">
      <div class="bottom collapse_sidebar" id="logoutbtn">
        <span> Signout</span>
        <i class='bx bx-log-out'></i>
      </div>
    </div>
    </div>
  </nav>

  <div class="dashboard_contents">
    <!-- Existing sub_containers here -->

    <div class="calender-details">
      <div class="week-days">
        <div class="calendar-nav">
          <button class="nav-arrow" id="prev-week"><i class="bx bx-chevron-left"></i></button>
          <button class="nav-arrow" id="next-week"><i class="bx bx-chevron-right"></i></button>
        </div>
        <div class="week-days-container">
          <div class="week-days-content">
            <!-- Dynamically populated with 7 days of the current week -->
            <div class="day-item">
              <span class="day-name"></span>
              <span class="day-date"></span>
              <span></span>
            </div>
            <div class="day-item">
              <span class="day-name"></span>
              <span class="day-date"></span>
              <span></span>
            </div>
            <div class="day-item">
              <span class="day-name"></span>
              <span class="day-date"></span>
              <span></span>
            </div>
            <div class="day-item">
              <span class="day-name"></span>
              <span class="day-date"> </span>
              <span></span>
            </div>
            <div class="day-item">
              <span class="day-name"></span>
              <span class="day-date"> </span>
              <span></span>
            </div>
            <div class="day-item">
              <span class="day-name"></span>
              <span class="day-date"> </span>
              <span></span>
            </div>
            <div class="day-item">
              <span class="day-name"></span>
              <span class="day-date"> </span>
              <span></span>
            </div>
          </div>
        </div>
      </div>
      <div class="holidays-birthdays">
        <div class="holidays-birthdays-content">
          <h4>Holidays & Birthdays</h4>
          <ul class="event-list">
            <!-- Dynamically populated with holidays and birthdays -->
            <li class="event-item"><span class="event-icon">🎉</span>Teacher's Day</li>
            <li class="event-item"><span class="event-icon">🎂</span>John's Birthday</li>
          </ul>
        </div>
      </div> 
    </div>

    <!-- New user_details container -->
    <div class="user_details">
      <div class="user_detail_item">
        <div class="detail_text">
          <span class="detail_count">0</span>
          <span class="detail_title">Students</span>
        </div>
        <i class="user_detail_icon fas fa-user-graduate"></i> <!-- Example icon -->
      </div>
      <div class="user_detail_item" style="background-color: #fae27c;">
        <div class="detail_text">
          <span class="detail_count">0</span>
          <span class="detail_title">Teachers</span>
        </div>
        <i class="user_detail_icon fas fa-chalkboard-teacher"></i> <!-- Example icon -->
      </div>
      <div class="user_detail_item">
        <div class="detail_text">
          <span class="detail_count">0</span>
          <span class="detail_title">Admins</span>
        </div>
        <i class="user_detail_icon fas fa-user-shield"></i> <!-- Example icon -->
      </div>
      <div class="user_detail_item" style="background-color: #fae27c;">
        <div class="detail_text">
          <span class="detail_count">0</span>
          <span class="detail_title">Support Staff</span>
        </div>
        <i class="user_detail_icon fas fa-users-cog"></i> <!-- Example icon -->
      </div>
      <div class="user_detail_item">
        <div class="detail_text">
          <span class="detail_count">0</span>
          <span class="detail_title">Employees</span>
        </div>
        <i class="user_detail_icon fas fa-users"></i> <!-- Example icon -->
      </div>
    </div>


    <!-- New containers below user_details -->
    <div class="graph_and_library_container">
      <div class="graph">
        <div class="male_female_graph">
          <div class="chart-container">
            <div class="chart">
              <svg width="200" height="200" viewBox="0 0 200 200">
                <circle cx="100" cy="100" r="90" fill="none" stroke="#fff" stroke-width="10" />
                <path fill="#82afe3" class="male-fill" d="M100,100 L100,10 A90,90 0 0,1 100,10 Z" />
                <path fill="#8cefda" class="female-fill" d="M100,100 L100,10 A90,90 0 0,1 100,10 Z" />
                <circle cx="100" cy="100" r="75" fill="white" />
              </svg>
              <div class="total_students" id="totalStudents">
                <!-- Total Primary Students -->
              </div>
            </div>
            <div class="legend">
              <div><span class="male"></span>Male: <span id="maleCount"></span></div>
              <div><span class="female"></span>Female: <span id="femaleCount"></span></div>
            </div>
            <h2 class="container_heading_piechart">Primary</h2>
          </div>
        </div>
      
        <div class="fee_status">
          <div class="chart-container">
            <div class="chart">
              <svg width="200" height="200" viewBox="0 0 200 200">
                <circle cx="100" cy="100" r="90" fill="none" stroke="#fff" stroke-width="10" />
                <path fill="#c3ebfa" class="pre-male-fill" d="M100,100 L100,10 A90,90 0 0,1 100,10 Z" />
                <path fill="#fae27c" class="pre-female-fill" d="M100,100 L100,10 A90,90 0 0,1 100,10 Z" />
                <circle cx="100" cy="100" r="75" fill="white" />
              </svg>
              <div class="total_students" id="prePrimaryTotal">
                <!-- Total Pre-Primary Students -->
              </div>
            </div>
            <div class="legend">
              <div><span class="pre-male"></span>Male: <span id="prePrimaryMaleCount"></span></div>
              <div><span class="pre-female"></span>Female: <span id="prePrimaryFemaleCount"></span></div>
            </div>
            <h2 class="container_heading_piechart">Pre-Primary</h2>
          </div>
        </div>
      </div>

      <div class="library_details">
        <h2 class="container_heading_lib">Library Overview</h2>
        <div class="library_items_container">
          <div class="library_item" style="background-color: #fdf6d8;">
            <div class="count_icon_container">
              <div class="detail_text_lib">
                <span id="totalBooksCount" class="details_count_lib">0</span>
                <span id="totalBooksTitle" class="detail_title_lib">Total Books</span>
              </div>
              <span class="library_icon">📚</span>
            </div>
          </div>
          <div class="library_item" style="background-color: #f1f0ff;">
            <div class="count_icon_container">
              <div class="detail_text_lib">
                <span id="memberCount" class="details_count_lib">0</span>
                <span id="memberCountTitle" class="detail_title_lib">Member Count</span>
              </div>
              <span class="library_icon">👤</span>
            </div>
          </div>
          <div class="library_item" style="background-color: #fdf6d8;">
            <div class="count_icon_container">
              <div class="detail_text_lib">
                <span id="booksIssuedCount" class="details_count_lib">0</span>
                <span id="booksIssuedTitle" class="detail_title_lib">Books Issued</span>
              </div>
              <span class="library_icon">📖</span>
            </div>
          </div>
          <div class="library_item" style="background-color: #f1f0ff;">
            <div class="count_icon_container">
              <div class="detail_text_lib">
                <span id="booksAvailableCount" class="details_count_lib">0</span>
                <span id="booksAvailableTitle" class="detail_title_lib">Books Available</span>
              </div>
              <span class="library_icon">📚</span>
            </div>
          </div>
          <div class="library_item" style="background-color: #f1f0ff;">
            <div class="count_icon_container">
              <div class="detail_text_lib">
                <span id="outstandingBooksCount" class="details_count_lib">0</span>
                <span id="outstandingBooksTitle" class="detail_title_lib">Outstanding Books</span>
              </div>
              <span class="library_icon">📚</span>
            </div>
          </div>
          <div class="library_item" style="background-color: #fdf6d8;">
            <div class="count_icon_container">
              <div class="detail_text_lib">
                <span id="booksIssuedTodayCount" class="details_count_lib">0</span>
                <span id="booksIssuedTodayTitle" class="detail_title_lib">Books Issued Today</span>
              </div>
              <span class="library_icon">📅</span>
            </div>
          </div>
          <div class="library_item" style="background-color: #f1f0ff;">
            <div class="count_icon_container">
              <div class="detail_text_lib">
                <span id="booksReturnedTodayCount" class="details_count_lib">0</span>
                <span id="booksReturnedTodayTitle" class="detail_title_lib">Books Returned Today</span>
              </div>
              <span class="library_icon">📅</span>
            </div>
          </div>
          <div class="library_item" style="background-color: #fdf6d8;">
            <div class="count_icon_container">
              <div class="detail_text_lib">
                <span id="penaltiesCollectedCount" class="details_count_lib">0</span>
                <span id="penaltiesCollectedTitle" class="detail_title_lib">Penalties Collected</span>
              </div>
              <span class="library_icon">💰</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="attendance_and_transport">
      <div class="attendance">
        <h3>Weekly Attendance</h3>
        <canvas id="attendanceChart" class="attendance-graph"></canvas>
      </div>
      <div class="transport">
        <h3>Transport Insights</h3>
        <div class="transport_wrapper">
          <div class="transport_cards">
            <div class="card summary-card">
              <h4><i class="fas fa-clipboard-list"></i> Summary</h4>
              <ul>
                <li><i class="fas fa-bus"></i> Number of Vehicles: <span id="vehicleCount">0</span></li>
                <li><i class="fas fa-user-tie"></i> Number of Drivers: <span id="driverCount">0</span></li>
                <!-- <li><i class="fas fa-user"></i> Number of Conductors: <span id="conductorCount">0</span></li> -->
                <li><i class="fas fa-users"></i> Number of Passengers: <span id="passengerCount">0</span></li>
                <li><i class="fas fa-route"></i> Number of Routes: <span id="routeCount">0</span></li>
                <li><i class="fas fa-calendar-alt"></i> Number of Shifts: <span id="shiftCount">0</span></li>
              </ul>
            </div>
            <div class="card location-card">
              <h4><i class="fas fa-map-marked-alt"></i> Live Location</h4>
              <ul>
                <!-- Vehicle details will be dynamically inserted here -->
              </ul>
            </div>
            <div class="card shift1-card" id="shift1">
              <h4><i class="fas fa-sun"></i> Shift - NA</h4>
            </div>
            <div class="card shift2-card" id="shift2">
              <h4><i class="fas fa-cloud-sun"></i> Shift - NA</h4>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for Map -->
    <div id="mapModal" class="overlay-map">
      <div class="overlay-content">
        <button id="closeMapOverlay" class="close-button">&times;</button>
        <div id="map"></div>
      </div>
    </div>

    <!-- Modal for Calendar -->
    <div class="overlay" id="calendar_overlay">
      <div class="overlay-content" id="calendar_overlay-content">
        <button id="calendar_close" class="close-button">&times;</button>
        <h2 class="overlay-heading">Academic Calendar</h2>
        <script src="https://unpkg.com/@dotlottie/player-component@latest/dist/dotlottie-player.mjs"
          type="module"></script>
        <dotlottie-player class="dotlottie-container"
          src="https://lottie.host/a546ef8a-0093-427f-8b0d-210b70b0cecb/OepvyEkrgH.lottie" background="transparent"
          speed="1" style="width: 50%; height: 50%;" loop autoplay></dotlottie-player>
        <div class="calendar-message">
          <p><strong>Step 1:</strong> Download the Excel.</p>
          <p><strong>Step 2:</strong> Add the holidays and events.</p>
          <p><strong>Note:</strong> Make sure to follow below while adding data to excel:</p>
          <div class="table-container">
            <table class="styled-table">
              <tr>
                <th>Sr_No</th>
                <th>Name</th>
                <th>Start_Date</th>
                <th>End_Date</th>
                <th>Type</th>
              </tr>
              <tr>
                <td>Digit</td>
                <td>No digit or special characters</td>
                <td>dd-mm-yyyy</td>
                <td>dd-mm-yyyy</td>
                <td>holiday/event</td>
              </tr>
            </table>
          </div>
          <p><strong>Step 3:</strong> Upload the Excel.</p>
        </div>
        <div class="overlay-bottom">
          <button class="downloadexcel" onclick="" id="download_excel" style="margin-top: 10px;">
            <img src="../images/file.png" alt="Download Icon"> Download Excel
          </button>
          <button class="uploadexcel" onclick="" id="upload_excel" style="margin-top: 10px;">
            <img src="../images/submit.png" alt="Upload Icon"> Upload Excel
          </button>
        </div>
      </div>
    </div>






    <!-- JavaScript -->
    <script src="/js/Main_Dashboard/main_dashboard.js"></script>
    <script src="/js/Universal_Components_JS/handle_session.js"></script>



</body>

</html>